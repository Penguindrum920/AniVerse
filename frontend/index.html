<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AniVerse - Login</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0f0f23;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 30% 50%, rgba(255, 107, 107, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 70% 50%, rgba(78, 205, 196, 0.15) 0%, transparent 50%);
            animation: backgroundShift 20s ease-in-out infinite;
        }

        @keyframes backgroundShift {

            0%,
            100% {
                transform: translate(0, 0);
            }

            50% {
                transform: translate(-10%, -5%);
            }
        }

        .container {
            position: relative;
            display: flex;
            align-items: center;
            gap: 80px;
            z-index: 1;
        }

        .blobs-container {
            position: relative;
            display: flex;
            flex-direction: row;
            align-items: flex-end;
            justify-content: center;
            gap: 15px;
            padding: 20px;
        }

        .blob {
            position: relative;
            width: 160px;
            height: 160px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            border-radius: 63% 37% 54% 46% / 55% 48% 52% 45%;
            box-shadow: 0 15px 60px rgba(255, 107, 107, 0.4),
                inset 0 -10px 30px rgba(0, 0, 0, 0.1);
            animation: blobMorph 6s ease-in-out infinite;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            filter: brightness(1.1);
            justify-self: center;
            align-self: center;
        }

        /* Orange Blob - Semi-circle */
        .blob-1 {
            background: linear-gradient(180deg, #FF8C42 0%, #FF6B35 100%);
            animation: blobMorph1 5s ease-in-out infinite;
            width: 220px;
            height: 180px;
            border-radius: 50% 50% 15% 15% / 100% 100% 0% 0%;
        }

        @keyframes blobMorph1 {

            0%,
            100% {
                border-radius: 50% 50% 15% 15% / 100% 100% 0% 0%;
                transform: rotate(0deg) scale(1);
            }

            50% {
                border-radius: 45% 55% 12% 18% / 95% 100% 0% 0%;
                transform: rotate(-3deg) scale(1.03);
            }
        }

        /* Purple Blob - Rectangle */
        .blob-2 {
            background: linear-gradient(180deg, #9B59B6 0%, #7B3FF2 100%);
            animation: blobMorph2 6s ease-in-out infinite;
            width: 130px;
            height: 230px;
            border-radius: 20px;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes blobMorph2 {

            0%,
            100% {
                border-radius: 15px;
                transform: rotate(0deg) scale(1);
            }

            50% {
                border-radius: 18px 12px 15px 18px;
                transform: rotate(2deg) scale(1.02);
            }
        }

        /* Sneaky behavior - turn around when others cover eyes */
        .blob-2.sneaky {
            transform: rotateY(165deg) translateX(15px);
        }

        .blob-2.sneaky .eyes {
            transform: rotateY(180deg) translateX(-8px);
        }

        /* Yellow Blob - Rounded Square/Cylinder */
        .blob-3 {
            background: linear-gradient(180deg, #FFD93D 0%, #FFC107 100%);
            animation: blobMorph3 7s ease-in-out infinite;
            width: 120px;
            height: 190px;
            border-radius: 25px 25px 20px 20px;
        }

        @keyframes blobMorph3 {

            0%,
            100% {
                border-radius: 20px 20px 15px 15px;
                transform: rotate(0deg) scale(1);
            }

            50% {
                border-radius: 25px 25px 18px 18px;
                transform: rotate(-2deg) scale(1.02);
            }
        }

        /* Teal Blob - Organic blob */
        .blob-4 {
            background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);
            animation: blobMorph4 5.5s ease-in-out infinite;
            width: 160px;
            height: 150px;
            border-radius: 60% 40% 40% 60% / 50% 50% 50% 50%;
        }

        @keyframes blobMorph4 {

            0%,
            100% {
                border-radius: 60% 40% 40% 60% / 50% 50% 50% 50%;
                transform: rotate(0deg) scale(1);
            }

            50% {
                border-radius: 40% 60% 60% 40% / 60% 40% 60% 40%;
                transform: rotate(4deg) scale(1.03);
            }
        }

        @keyframes blobMorph {

            0%,
            100% {
                border-radius: 63% 37% 54% 46% / 55% 48% 52% 45%;
                transform: rotate(0deg) scale(1);
            }

            25% {
                border-radius: 40% 60% 70% 30% / 40% 60% 30% 60%;
                transform: rotate(-5deg) scale(1.05);
            }

            50% {
                border-radius: 70% 30% 30% 70% / 60% 40% 60% 40%;
                transform: rotate(5deg) scale(0.98);
            }

            75% {
                border-radius: 30% 70% 50% 50% / 50% 70% 30% 50%;
                transform: rotate(-3deg) scale(1.02);
            }
        }

        .eyes {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            transition: transform 0.3s ease;
        }

        .eye {
            width: 38px;
            height: 42px;
            background: white;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3),
                inset 0 2px 5px rgba(255, 255, 255, 0.8);
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        /* Blob 1 - Big round eyes */
        .blob-1 .eye {
            width: 52px;
            height: 52px;
            border-radius: 50%;
        }

        .blob-1 .pupil {
            width: 20px;
            height: 20px;
        }

        /* Blob 2 - Narrow sneaky eyes */
        .blob-2 .eye {
            width: 46px;
            height: 48px;
            border-radius: 50% 50% 50% 50% / 55% 55% 45% 45%;
        }

        .blob-2 .pupil {
            width: 18px;
            height: 18px;
        }

        /* Blob 3 - Wide cheerful eyes */
        .blob-3 .eye {
            width: 54px;
            height: 50px;
            border-radius: 50%;
        }

        .blob-3 .pupil {
            width: 20px;
            height: 20px;
        }

        /* Blob 4 - Oval calm eyes */
        .blob-4 .eye {
            width: 44px;
            height: 56px;
            border-radius: 50% 50% 50% 50% / 65% 65% 35% 35%;
        }

        .blob-4 .pupil {
            width: 18px;
            height: 18px;
        }

        .pupil {
            width: 16px;
            height: 16px;
            background: radial-gradient(circle at 30% 30%, #2d3436, #000);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.15s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        }

        .pupil::after {
            content: '';
            position: absolute;
            width: 5px;
            height: 5px;
            background: white;
            border-radius: 50%;
            top: 3px;
            left: 4px;
        }

        .mouth {
            position: absolute;
            bottom: 35px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 25px;
            border: 4px solid rgba(255, 255, 255, 0.8);
            border-top: none;
            border-radius: 0 0 50px 50px;
            transition: all 0.3s ease;
            opacity: 0;
        }

        .hand {
            position: absolute;
            width: 55px;
            height: 55px;
            background: inherit;
            border-radius: 60% 40% 55% 45% / 50% 50% 50% 50%;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            pointer-events: none;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            filter: brightness(0.95);
        }

        .hand-left {
            left: -25px;
            top: 45%;
            transform: translateY(-50%) rotate(-15deg);
        }

        .hand-right {
            right: -25px;
            top: 45%;
            transform: translateY(-50%) rotate(15deg);
        }

        .blob.covering .hand {
            opacity: 1;
        }

        .blob.covering .hand-left {
            left: 35px;
            transform: translateY(-50%) rotate(5deg) scale(1.1);
        }

        .blob.covering .hand-right {
            right: 35px;
            transform: translateY(-50%) rotate(-5deg) scale(1.1);
        }

        .blob.covering .eye {
            transform: scaleY(0.1);
            opacity: 0.3;
        }

        .blob.covering .pupil {
            opacity: 0;
        }

        .blob.happy {
            animation: wiggle 0.6s ease;
        }

        .blob.happy .mouth {
            opacity: 1;
            height: 30px;
            width: 60px;
        }

        /* Blob 1 - Wide happy smile */
        .blob-1.happy .mouth {
            width: 65px;
            height: 32px;
        }

        /* Blob 2 - Sly smirk */
        .blob-2.happy .mouth {
            width: 45px;
            height: 22px;
            transform: translateX(-50%) rotate(-5deg);
        }

        /* Blob 3 - Big grin */
        .blob-3.happy .mouth {
            width: 70px;
            height: 35px;
            border-width: 5px;
        }

        /* Blob 4 - Gentle smile */
        .blob-4.happy .mouth {
            width: 50px;
            height: 25px;
        }

        .blob.happy .eye {
            height: 25px;
            border-radius: 50% 50% 50% 50% / 70% 70% 30% 30%;
        }

        @keyframes wiggle {

            0%,
            100% {
                transform: rotate(0deg) scale(1);
            }

            25% {
                transform: rotate(-8deg) scale(1.08);
            }

            50% {
                transform: rotate(8deg) scale(1.08);
            }

            75% {
                transform: rotate(-8deg) scale(1.08);
            }
        }

        .blob.surprised .eye {
            width: 48px;
            height: 48px;
            border-radius: 50%;
        }

        .blob.surprised .pupil {
            width: 22px;
            height: 22px;
        }

        .blob.surprised .mouth {
            opacity: 1;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 4px solid rgba(255, 255, 255, 0.8);
            bottom: 30px;
        }

        /* Blob 1 - Big surprise */
        .blob-1.surprised .eye {
            width: 50px;
            height: 50px;
        }

        /* Blob 2 - Caught off guard */
        .blob-2.surprised .eye {
            width: 44px;
            height: 44px;
        }

        /* Blob 3 - Shocked wide */
        .blob-3.surprised .eye {
            width: 52px;
            height: 48px;
        }

        .blob-3.surprised .mouth {
            width: 35px;
            height: 35px;
        }

        /* Blob 4 - Subtle surprise */
        .blob-4.surprised .eye {
            width: 42px;
            height: 52px;
        }

        .blob.nervous {
            animation: shake 0.3s ease;
        }

        .blob.nervous .eye {
            animation: blink 0.15s ease 2;
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-8px);
            }

            75% {
                transform: translateX(8px);
            }
        }

        @keyframes blink {

            0%,
            100% {
                transform: scaleY(1);
            }

            50% {
                transform: scaleY(0.1);
            }
        }

        .blob.typing .eyes {
            animation: lookDown 0.5s ease forwards;
        }

        @keyframes lookDown {
            to {
                transform: translateY(8px);
            }
        }

        .login-box {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            padding: 50px 45px;
            border-radius: 30px;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 420px;
        }

        h2 {
            text-align: center;
            color: #fff;
            margin-bottom: 10px;
            font-size: 32px;
            font-weight: 700;
            letter-spacing: -0.5px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .brand-subtitle {
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 35px;
            font-size: 14px;
        }

        .input-group {
            margin-bottom: 25px;
            position: relative;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
            font-size: 14px;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            font-size: 16px;
            transition: all 0.3s ease;
            outline: none;
            background: rgba(255, 255, 255, 0.08);
            color: #fff;
            font-weight: 500;
        }

        input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        input:focus {
            border-color: #4ecdc4;
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 0 4px rgba(78, 205, 196, 0.15),
                0 8px 20px rgba(78, 205, 196, 0.2);
            transform: translateY(-2px);
        }

        button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            margin-top: 15px;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.4);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(255, 107, 107, 0.5);
            background: linear-gradient(135deg, #ff7b7b 0%, #ff6a7f 100%);
        }

        button:active {
            transform: translateY(-1px);
        }

        .forgot-password {
            text-align: center;
            margin-top: 20px;
        }

        .forgot-password a {
            color: #4ecdc4;
            text-decoration: none;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .forgot-password a:hover {
            color: #6ee7db;
            text-shadow: 0 0 10px rgba(78, 205, 196, 0.5);
        }

        .guest-btn {
            background: transparent;
            border: 2px solid #4ecdc4;
            color: #4ecdc4;
            box-shadow: none;
        }

        .guest-btn:hover {
            background: rgba(78, 205, 196, 0.15);
            box-shadow: 0 0 20px rgba(78, 205, 196, 0.3);
            border-color: #6ee7db;
            color: #6ee7db;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="blobs-container">
            <!-- Orange Blob -->
            <div class="blob blob-1" id="blob1">
                <div class="eyes">
                    <div class="eye">
                        <div class="pupil" data-blob="1" data-eye="1"></div>
                    </div>
                    <div class="eye">
                        <div class="pupil" data-blob="1" data-eye="2"></div>
                    </div>
                </div>
                <div class="mouth"></div>
                <div class="hand hand-left"></div>
                <div class="hand hand-right"></div>
            </div>

            <!-- Purple Blob -->
            <div class="blob blob-2" id="blob2">
                <div class="eyes">
                    <div class="eye">
                        <div class="pupil" data-blob="2" data-eye="1"></div>
                    </div>
                    <div class="eye">
                        <div class="pupil" data-blob="2" data-eye="2"></div>
                    </div>
                </div>
                <div class="mouth"></div>
                <div class="hand hand-left"></div>
                <div class="hand hand-right"></div>
            </div>

            <!-- Yellow Blob -->
            <div class="blob blob-3" id="blob3">
                <div class="eyes">
                    <div class="eye">
                        <div class="pupil" data-blob="3" data-eye="1"></div>
                    </div>
                    <div class="eye">
                        <div class="pupil" data-blob="3" data-eye="2"></div>
                    </div>
                </div>
                <div class="mouth"></div>
                <div class="hand hand-left"></div>
                <div class="hand hand-right"></div>
            </div>

            <!-- Teal Blob -->
            <div class="blob blob-4" id="blob4">
                <div class="eyes">
                    <div class="eye">
                        <div class="pupil" data-blob="4" data-eye="1"></div>
                    </div>
                    <div class="eye">
                        <div class="pupil" data-blob="4" data-eye="2"></div>
                    </div>
                </div>
                <div class="mouth"></div>
                <div class="hand hand-left"></div>
                <div class="hand hand-right"></div>
            </div>
        </div>

        <div class="login-box" id="loginBox">
            <h2>▲ AniVerse</h2>
            <p class="brand-subtitle">Discover anime that matches your vibe</p>
            <div id="errorMessage"
                style="display:none; color:#ff6b6b; text-align:center; margin-bottom:15px; font-size:14px;"></div>
            <form id="loginForm">
                <div class="input-group">
                    <label for="identifier">Email or Username</label>
                    <input type="text" id="identifier" name="identifier" placeholder="Enter email or username" required>
                </div>
                <div class="input-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" placeholder="Enter your password" required>
                </div>
                <button type="submit" id="loginBtn">Sign In</button>
                <button type="button" id="guestBtn" class="guest-btn">Continue as Guest</button>
                <div class="forgot-password">
                    <a href="#" id="showSignup">Don't have an account? Sign up</a>
                </div>
            </form>
        </div>

        <!-- Signup Modal -->
        <div class="login-box" id="signupBox" style="display:none;">
            <h2>▲ Create Account</h2>
            <p class="brand-subtitle">Join the anime community</p>
            <div id="signupError"
                style="display:none; color:#ff6b6b; text-align:center; margin-bottom:15px; font-size:14px;"></div>
            <form id="signupForm">
                <div class="input-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" name="email" placeholder="Enter your email" required>
                </div>
                <div class="input-group">
                    <label for="signupUsername">Username</label>
                    <input type="text" id="signupUsername" name="username" placeholder="Choose a username" required
                        minlength="3">
                </div>
                <div class="input-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" name="password" placeholder="Create a password" required
                        minlength="6">
                </div>
                <button type="submit" id="signupBtn">Create Account</button>
                <div class="forgot-password">
                    <a href="#" id="showLogin">Already have an account? Sign in</a>
                </div>
            </form>
        </div>
    </div>

    <script>
        const blobs = [
            document.getElementById('blob1'),
            document.getElementById('blob2'),
            document.getElementById('blob3'),
            document.getElementById('blob4')
        ];

        const allPupils = document.querySelectorAll('.pupil');
        const identifierInput = document.getElementById('identifier');
        const passwordInput = document.getElementById('password');
        const loginForm = document.getElementById('loginForm');

        let currentFocus = null;
        let typingTimer = null;

        // Track mouse movement for eye following
        document.addEventListener('mousemove', (e) => {
            if (currentFocus !== 'password') {
                moveAllEyes(e.clientX, e.clientY);
            }
        });

        function moveAllEyes(targetX, targetY) {
            allPupils.forEach(pupil => {
                const blobId = pupil.getAttribute('data-blob');
                const blob = document.getElementById(`blob${blobId}`);
                const blobRect = blob.getBoundingClientRect();
                const centerX = blobRect.left + blobRect.width / 2;
                const centerY = blobRect.top + blobRect.height / 2;

                const angle = Math.atan2(targetY - centerY, targetX - centerX);
                const distance = Math.min(8, Math.hypot(targetX - centerX, targetY - centerY) / 30);
                const pupilX = Math.cos(angle) * distance;
                const pupilY = Math.sin(angle) * distance;

                pupil.style.transform = `translate(calc(-50% + ${pupilX}px), calc(-50% + ${pupilY}px))`;
            });
        }

        // React to identifier input (email/username field)
        identifierInput.addEventListener('focus', () => {
            currentFocus = 'identifier';

            // Different reactions for each blob
            blobs[0].classList.add('happy');
            setTimeout(() => blobs[1].classList.add('surprised'), 100);
            setTimeout(() => blobs[2].classList.add('happy'), 200);
            setTimeout(() => blobs[3].classList.add('surprised'), 300);

            blobs.forEach(blob => blob.classList.add('typing'));

            // Look at the identifier field
            const inputRect = identifierInput.getBoundingClientRect();
            const inputX = inputRect.left + inputRect.width / 2;
            const inputY = inputRect.top + inputRect.height / 2;
            moveAllEyes(inputX, inputY);

            // Reset after animation
            setTimeout(() => {
                blobs.forEach(blob => {
                    blob.classList.remove('happy', 'surprised');
                });
            }, 800);
        });

        identifierInput.addEventListener('blur', () => {
            if (currentFocus === 'identifier') {
                currentFocus = null;
            }
            blobs.forEach(blob => {
                blob.classList.remove('happy', 'typing', 'surprised');
            });
        });

        identifierInput.addEventListener('input', () => {
            clearTimeout(typingTimer);

            const length = identifierInput.value.length;

            // Rotating reactions for different blobs
            const blobIndex = length % 4;
            blobs[blobIndex].classList.add('surprised');

            setTimeout(() => {
                blobs[blobIndex].classList.remove('surprised');
            }, 300);

            // Occasional happy wiggle
            if (length > 0 && length % 5 === 0) {
                const randomBlob = blobs[Math.floor(Math.random() * 4)];
                randomBlob.classList.add('happy');
                setTimeout(() => randomBlob.classList.remove('happy'), 600);
            }
        });

        // React to password input - cover eyes for privacy!
        passwordInput.addEventListener('focus', () => {
            currentFocus = 'password';

            // Staggered nervous reaction, but blob 2 (purple) is sneaky!
            blobs.forEach((blob, index) => {
                setTimeout(() => {
                    blob.classList.add('nervous');
                    setTimeout(() => {
                        blob.classList.remove('nervous');
                        // Purple blob (index 1) turns around and peeks!
                        if (index !== 1) {
                            blob.classList.add('covering');
                        } else {
                            // Sneaky blob turns around
                            blob.classList.add('sneaky');

                            // Make eyes look to the corner (sneaky side-eye)
                            setTimeout(() => {
                                const sneakyPupils = blob.querySelectorAll('.pupil');
                                sneakyPupils.forEach((pupil, pIndex) => {
                                    // Look to the right corner (toward password)
                                    const pupilX = pIndex === 0 ? -10 : -10;
                                    const pupilY = -3;
                                    pupil.style.transform = `translate(calc(-50% + ${pupilX}px), calc(-50% + ${pupilY}px))`;
                                });
                            }, 400);
                        }
                    }, 300);
                }, index * 100);
            });
        });

        passwordInput.addEventListener('blur', () => {
            if (currentFocus === 'password') {
                currentFocus = null;
            }

            // Remove sneaky behavior
            blobs[1].classList.remove('sneaky');

            // Peek before uncovering - staggered
            blobs.forEach((blob, index) => {
                setTimeout(() => {
                    blob.classList.remove('covering');
                    blob.classList.add('surprised');

                    setTimeout(() => {
                        blob.classList.remove('surprised');
                    }, 500);
                }, index * 80);
            });
        });

        passwordInput.addEventListener('input', () => {
            // Random nervous shakes while entering password (only covered blobs)
            if (passwordInput.value.length % 2 === 0) {
                const coveredBlobs = blobs.filter((_, index) => index !== 1);
                const randomBlob = coveredBlobs[Math.floor(Math.random() * coveredBlobs.length)];
                randomBlob.classList.add('nervous');
                setTimeout(() => randomBlob.classList.remove('nervous'), 300);
            }

            // Sneaky blob reacts to what it sees (pupils move slightly)
            if (passwordInput.value.length % 3 === 0 && passwordInput.value.length > 0) {
                const sneakyPupils = blobs[1].querySelectorAll('.pupil');
                sneakyPupils.forEach(pupil => {
                    // Quick glance animation
                    pupil.style.transform = `translate(calc(-50% + ${-12}px), calc(-50% + ${-5}px))`;
                    setTimeout(() => {
                        pupil.style.transform = `translate(calc(-50% + ${-10}px), calc(-50% + ${-3}px))`;
                    }, 200);
                });
            }
        });

        // API Configuration
        const API_BASE = 'https://penguindrum920-aniverse.hf.space';

        // Show error message
        function showError(elementId, message) {
            const el = document.getElementById(elementId);
            el.textContent = message;
            el.style.display = 'block';
            setTimeout(() => { el.style.display = 'none'; }, 5000);
        }

        // Toggle between login and signup forms
        document.getElementById('showSignup').addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('loginBox').style.display = 'none';
            document.getElementById('signupBox').style.display = 'block';
        });

        document.getElementById('showLogin').addEventListener('click', (e) => {
            e.preventDefault();
            document.getElementById('signupBox').style.display = 'none';
            document.getElementById('loginBox').style.display = 'block';
        });

        // Handle login form submission
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const identifier = document.getElementById('identifier').value;
            const password = passwordInput.value;
            const loginBtn = document.getElementById('loginBtn');

            loginBtn.textContent = 'Signing in...';
            loginBtn.disabled = true;

            try {
                const response = await fetch(`${API_BASE}/api/auth/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ identifier, password })
                });

                const data = await response.json();

                if (response.ok) {
                    // Save token and user data
                    localStorage.setItem('aniverse_token', data.access_token);
                    localStorage.setItem('aniverse_user', JSON.stringify(data.user));

                    // Show happy animation
                    blobs.forEach(blob => blob.classList.remove('covering'));
                    blobs.forEach((blob, index) => {
                        setTimeout(() => {
                            blob.classList.add('happy');
                        }, index * 150);
                    });

                    // Redirect to main app
                    setTimeout(() => {
                        window.location.href = 'app.html';
                    }, 800);
                } else {
                    showError('errorMessage', data.detail || 'Login failed. Please check your credentials.');
                    blobs.forEach(blob => blob.classList.add('nervous'));
                    setTimeout(() => blobs.forEach(blob => blob.classList.remove('nervous')), 500);
                }
            } catch (error) {
                console.error('Login error:', error);
                showError('errorMessage', 'Connection failed. Please try again.');
            } finally {
                loginBtn.textContent = 'Sign In';
                loginBtn.disabled = false;
            }
        });

        // Handle signup form submission
        document.getElementById('signupForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('signupEmail').value;
            const username = document.getElementById('signupUsername').value;
            const password = document.getElementById('signupPassword').value;
            const signupBtn = document.getElementById('signupBtn');

            signupBtn.textContent = 'Creating account...';
            signupBtn.disabled = true;

            try {
                const response = await fetch(`${API_BASE}/api/auth/register`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, username, password })
                });

                const data = await response.json();

                if (response.ok) {
                    // Save token and user data
                    localStorage.setItem('aniverse_token', data.access_token);
                    localStorage.setItem('aniverse_user', JSON.stringify(data.user));

                    // Show happy animation
                    blobs.forEach((blob, index) => {
                        setTimeout(() => {
                            blob.classList.add('happy');
                        }, index * 100);
                    });

                    // Redirect to main app
                    setTimeout(() => {
                        window.location.href = 'app.html';
                    }, 800);
                } else {
                    showError('signupError', data.detail || 'Registration failed. Please try again.');
                }
            } catch (error) {
                console.error('Signup error:', error);
                showError('signupError', 'Connection failed. Please try again.');
            } finally {
                signupBtn.textContent = 'Create Account';
                signupBtn.disabled = false;
            }
        });

        // Guest login handler
        document.getElementById('guestBtn').addEventListener('click', () => {
            // Clear any existing auth
            localStorage.removeItem('aniverse_token');
            localStorage.removeItem('aniverse_user');

            // Fun animation for guest login
            blobs.forEach((blob, index) => {
                setTimeout(() => {
                    blob.classList.add('happy');
                }, index * 100);
            });

            setTimeout(() => {
                window.location.href = 'app.html';
            }, 600);
        });

        // Initial eye position - looking at login box
        setTimeout(() => {
            const loginBoxRect = document.querySelector('.login-box').getBoundingClientRect();
            moveAllEyes(loginBoxRect.left + loginBoxRect.width / 2, loginBoxRect.top + loginBoxRect.height / 2);
        }, 100);

        // Add random blinks to different blobs
        setInterval(() => {
            const randomBlob = blobs[Math.floor(Math.random() * 4)];
            randomBlob.classList.add('nervous');
            setTimeout(() => randomBlob.classList.remove('nervous'), 150);
        }, 3000 + Math.random() * 2000);

        // Random expressions when idle
        setInterval(() => {
            if (!currentFocus) {
                const randomBlob = blobs[Math.floor(Math.random() * 4)];
                const expressions = ['happy', 'surprised'];
                const randomExpression = expressions[Math.floor(Math.random() * expressions.length)];

                randomBlob.classList.add(randomExpression);
                setTimeout(() => {
                    randomBlob.classList.remove(randomExpression);
                }, 800);
            }
        }, 5000 + Math.random() * 3000);
    </script>
</body>

</html>